<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>At glance</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;600&display=swap" rel="stylesheet">
    <link async rel="stylesheet" type="text/css" href="/assets/css/glance.css" />
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
</head>


<body>

<div class="wrapper">

    <div class="tile">
    <div class="headline">Japan</div>
    <div class="pricing">
        <div class="pricing-months">
        <div class="price-per-month">Oct – €782</div>
        <div class="price-per-month">Nov – €782</div>
        </div>
        <div id="app" class="pricing-big" v-if="flightData.length > 0">€{{ flightData[0].price }}</div>
    </div>
        
    </div>  
        
    
    
    
    <div class="tile">
    <div class="headline">Stocks</div>
    <div class="pricing">
        <div class="stock-prices">
            <div class="stock-name">AAPL</div>
            <div class="stock-price">$462</div>
        </div>
        
        <div class="stock-prices">
            <div class="stock-name">AMZ</div>
            <div class="stock-price">$1123</div>
        </div>
        
        <div class="stock-prices">
            <div class="stock-name">SBR</div>
            <div class="stock-price">$2344</div>
        </div>
        
        
    </div>
        
        <div class="pricing">
        <div class="stock-prices">
            <div class="stock-name">AAPL</div>
            <div class="stock-price">$462</div>
        </div>
        
        <div class="stock-prices">
            <div class="stock-name">AMZ</div>
            <div class="stock-price">$1123</div>
        </div>
        
        <div class="stock-prices">
            <div class="stock-name">SBR</div>
            <div class="stock-price">$2344</div>
        </div>
        
        
    </div>
        
        
        
    </div>
    
    
    
</div>
    
    
    
    
    
    
   <!-- <div id="app">
       <p v-if="flightData.length > 0">{{ flightData[0].price }}CZK</p>
    </div>
    
    <div id="app2">
       <p v-if="flightData.length > 0">{{ flightData[0].price }} CZK</p>
    </div> -->



</body>

<script>
    var app = new Vue({
        el: '#app',
        data: {
            flightData: []
        },

        created: async function() {

                function formattedDate(d = new Date) {
                return [d.getDate(), d.getMonth() + 1, d.getFullYear()]
                    .map(n => n < 10 ? `0${n}` : `${n}`).join('/');
                        
            }

            var curData = formattedDate()
            
            let response = await fetch(`https://api.skypicker.com/flights?fly_from=PRG&fly_to=TYO&dateFrom=${curData}&dateTo=31/12/2020&partner=picky&v=3&price_from=0&price_to=100000&flightDurationMax=20&curr=EUR`);

            if (response.ok) {
                let json = await response.json();
                console.log(json)
                
                
                this.flightData = json.data
                

            } else {
                alert("Ошибка HTTP: " + response.status);
            }
        }

    })
    
    
    
    var app2 = new Vue({
        el: '#app2',
        data: {
            flightData: []
        },

        created: async function() {

                function formattedDate(d = new Date) {
                return [d.getDate(), d.getMonth() + 1, d.getFullYear()]
                    .map(n => n < 10 ? `0${n}` : `${n}`).join('/');
                        
            }

            var curData = formattedDate()
            
            let response = await fetch(`https://api.skypicker.com/flights?fly_from=PRG&fly_to=TYO&dateFrom=${curData}&dateTo=31/12/2020&partner=picky&v=3&price_from=0&price_to=100000&flightDurationMax=20&curr=CZK`);

            if (response.ok) {
                let json = await response.json();
                console.log(json)
                
                
                this.flightData = json.data
                

            } else {
                alert("Ошибка HTTP: " + response.status);
            }
        }

    })


</script>
    
    



</html>
